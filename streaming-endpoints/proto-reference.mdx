---
title: "Protocol Buffer Reference"
sidebarTitle: "Proto Reference"
description: "Complete reference for gRPC message definitions and Python code generation"
---

# Protocol Buffer Reference

Complete reference documentation for all Protocol Buffer messages, fields, and enumerations used in the gRPC streaming API.

## Available Services

The Polymarket Exchange API exposes the following gRPC services:

| Service | Description |
|---------|-------------|
| `polymarket.v1.MarketDataSubscriptionAPI` | Real-time market data streaming |
| `polymarket.v1.OrderEntryAPI` | Order submission and streaming |
| `polymarket.v1.OrderAPI` | Order search and history |
| `polymarket.v1.PositionAPI` | Position and balance queries |
| `polymarket.v1.AccountsAPI` | Account information |
| `polymarket.v1.MarketDataAPI` | Instrument and symbol data |
| `polymarket.v1.DropCopyAPI` | Execution feed |
| `polymarket.v1.KYCAPI` | KYC verification |
| `polymarket.v1.AeropayAPI` | ACH payments |
| `polymarket.v1.CheckoutAPI` | Card payments |
| `polymarket.v1.FundingAPI` | Funding management |
| `polymarket.v1.HealthAPI` | Health check |

---

## Obtaining Proto Files

### Option 1: Request Proto Files (Recommended)

<Card title="Request Proto Files" icon="envelope" href="mailto:onboarding@qcex.com">
  **Contact the Polymarket API team** to request the proto definitions package.
</Card>

### Option 2: gRPC Server Reflection

Use gRPC reflection to discover services at runtime. Install [grpcurl](https://github.com/fullstorydev/grpcurl) first.

```bash
# List all services
grpcurl -authority grpc-prod.polymarketexchange.com grpc-prod.polymarketexchange.com:443 list

# Example output:
# polymarket.v1.AccountsAPI
# polymarket.v1.AeropayAPI
# polymarket.v1.MarketDataSubscriptionAPI
# polymarket.v1.OrderEntryAPI
# ...

# Describe a specific service
grpcurl -authority grpc-prod.polymarketexchange.com grpc-prod.polymarketexchange.com:443 \
  describe polymarket.v1.MarketDataSubscriptionAPI

# Describe a message type
grpcurl -authority grpc-prod.polymarketexchange.com grpc-prod.polymarketexchange.com:443 \
  describe polymarket.v1.CreateMarketDataSubscriptionRequest
```

<Info>
The `-authority` flag sets the `:authority` header for TLS certificate validation.
</Info>

---

## Generating Python Client Code

After downloading the proto files, generate Python code:

```bash
# Extract protos
unzip polymarket-v1-protos.zip -d protos/polymarket/v1/

# Generate Python code
python -m grpc_tools.protoc \
  --python_out=. \
  --grpc_python_out=. \
  --proto_path=protos \
  protos/polymarket/v1/*.proto
```

This generates:
- `*_pb2.py` - Message and enum definitions
- `*_pb2_grpc.py` - Service stubs

---

## Market Data Streaming

### MarketDataSubscriptionAPI Service

```protobuf
service MarketDataSubscriptionAPI {
    rpc CreateMarketDataSubscription(CreateMarketDataSubscriptionRequest)
        returns (stream CreateMarketDataSubscriptionResponse);
}
```

### Python Usage

```python
from polymarket.v1 import marketdatasubscription_pb2
from polymarket.v1 import marketdatasubscription_pb2_grpc

# Create request
request = marketdatasubscription_pb2.CreateMarketDataSubscriptionRequest(
    symbols=["SYMBOL-123"],
    depth=10
)

# Use stub
stub = marketdatasubscription_pb2_grpc.MarketDataSubscriptionAPIStub(channel)
response_stream = stub.CreateMarketDataSubscription(request, metadata=metadata)
```

### Request Fields

| Field | Type | Description |
|-------|------|-------------|
| `symbols` | `list[str]` | Symbols to subscribe to. Empty = all symbols. |
| `unaggregated` | `bool` | If true, receive raw orders. If false, aggregated book. |
| `depth` | `int` | Number of price levels. Default: 10 |
| `snapshot_only` | `bool` | If true, receive snapshot then close. |

### Response Fields

```python
if response.HasField('heartbeat'):
    # Keep-alive message
    pass
elif response.HasField('update'):
    update = response.update
    print(f"Symbol: {update.symbol}")
    print(f"Bids: {len(update.bids)}")
    print(f"Offers: {len(update.offers)}")
```

| Field | Type | Description |
|-------|------|-------------|
| `symbol` | `str` | Instrument symbol |
| `bids` | `list[BookEntry]` | Bid side of order book |
| `offers` | `list[BookEntry]` | Offer/ask side of order book |
| `state` | `InstrumentState` | Current instrument state |
| `stats` | `InstrumentStats` | Market statistics |

---

## Order Entry Streaming

### OrderEntryAPI Service

```protobuf
service OrderEntryAPI {
    rpc CreateOrderSubscription(CreateOrderSubscriptionRequest)
        returns (stream CreateOrderSubscriptionResponse);

    rpc InsertOrder(InsertOrderRequest) returns (InsertOrderResponse);
    rpc CancelOrder(CancelOrderRequest) returns (CancelOrderResponse);
}
```

### Python Usage

```python
from polymarket.v1 import trading_pb2
from polymarket.v1 import trading_pb2_grpc

# Create order subscription request
request = trading_pb2.CreateOrderSubscriptionRequest(
    symbols=["SYMBOL-123"],
    accounts=[],
    snapshot_only=False
)

# Use stub
stub = trading_pb2_grpc.OrderEntryAPIStub(channel)
response_stream = stub.CreateOrderSubscription(request, metadata=metadata)
```

### Subscription Request Fields

| Field | Type | Description |
|-------|------|-------------|
| `symbols` | `list[str]` | Filter by symbols. Empty = all. |
| `accounts` | `list[str]` | Filter by accounts. Empty = all user's accounts. |
| `snapshot_only` | `bool` | If true, snapshot only. |

### Response Processing

```python
if response.HasField('heartbeat'):
    pass
elif response.HasField('snapshot'):
    for order in response.snapshot.orders:
        print(f"Order: {order.id} - {order.symbol}")
elif response.HasField('update'):
    for execution in response.update.executions:
        print(f"Execution: {execution.id}")
```

---

## Enumerations

### Side

| Name | Value |
|------|-------|
| `SIDE_BUY` | 1 |
| `SIDE_SELL` | 2 |

### OrderType

| Name | Value |
|------|-------|
| `ORDER_TYPE_MARKET_TO_LIMIT` | 1 |
| `ORDER_TYPE_LIMIT` | 2 |
| `ORDER_TYPE_STOP` | 3 |
| `ORDER_TYPE_STOP_LIMIT` | 4 |

### TimeInForce

| Name | Value | Description |
|------|-------|-------------|
| `TIME_IN_FORCE_DAY` | 1 | Expires end of day |
| `TIME_IN_FORCE_GTC` | 2 | Good-till-canceled |
| `TIME_IN_FORCE_IOC` | 3 | Immediate-or-cancel |
| `TIME_IN_FORCE_FOK` | 4 | Fill-or-kill |
| `TIME_IN_FORCE_GTT` | 5 | Good-till-time |

### OrderState

| Name | Value | Description |
|------|-------|-------------|
| `ORDER_STATE_NEW` | 1 | Accepted and resting |
| `ORDER_STATE_PARTIALLY_FILLED` | 2 | Partially executed |
| `ORDER_STATE_FILLED` | 3 | Completely filled |
| `ORDER_STATE_CANCELED` | 4 | Canceled |
| `ORDER_STATE_REJECTED` | 7 | Rejected |
| `ORDER_STATE_EXPIRED` | 9 | Expired |

### ExecutionType

| Name | Value | Description |
|------|-------|-------------|
| `EXECUTION_TYPE_NEW` | 1 | Order confirmation |
| `EXECUTION_TYPE_PARTIAL_FILL` | 2 | Partial fill |
| `EXECUTION_TYPE_FILL` | 3 | Complete fill |
| `EXECUTION_TYPE_CANCELED` | 4 | Cancellation |
| `EXECUTION_TYPE_REJECTED` | 7 | Rejection |
| `EXECUTION_TYPE_TRADE` | 9 | Trade execution |
| `EXECUTION_TYPE_EXPIRED` | 10 | Expiration |

### InstrumentState

| Name | Value | Description |
|------|-------|-------------|
| `INSTRUMENT_STATE_CLOSED` | 0 | Market closed |
| `INSTRUMENT_STATE_OPEN` | 1 | Active trading |
| `INSTRUMENT_STATE_PREOPEN` | 2 | Pre-opening auction |
| `INSTRUMENT_STATE_SUSPENDED` | 3 | Trading suspended |
| `INSTRUMENT_STATE_HALTED` | 6 | Trading halted |

---

## Price Representation

<Warning>
**All prices are `int64` values.** Divide by the instrument's `price_scale` to get the decimal value.

```python
decimal_price = order.price / order.price_scale
print(f"Price: ${decimal_price:.4f}")
```
</Warning>

---

## Next Steps

<CardGroup cols={2}>
  <Card title="Market Data Stream" icon="chart-line" href="/streaming-endpoints/market-data-stream">
    Learn about market data streaming
  </Card>
  <Card title="Order Stream" icon="file-invoice" href="/streaming-endpoints/order-stream">
    Learn about order streaming
  </Card>
  <Card title="Error Handling" icon="triangle-exclamation" href="/streaming-endpoints/error-handling">
    Handle errors and reconnections
  </Card>
</CardGroup>
