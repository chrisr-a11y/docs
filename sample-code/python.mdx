---
title: "Python Sample Code"
description: "Python client library for the Polymarket Exchange REST API"
---

## Overview

The Python sample code demonstrates how to authenticate and use the **Polymarket Exchange REST API**. It includes a complete client library and 10 example scripts covering all major REST endpoints.

<Note>
**gRPC Streaming:** Both Python and Go sample code include examples for real-time gRPC streaming connections (market data, orders, positions, funding, and drop copy). See also: [Go Sample Code](/sample-code/go)
</Note>

<Card title="Download Sample Code" icon="download" href="/downloads/polymarket-client-sample-code.zip">
  **Download the complete sample code package** including Python and Go examples.
</Card>

## What's Included

- **REST API Client** - Complete client for all REST endpoints
- **10 Example Scripts** - Ready-to-run examples for each operation
- **Authentication** - Private key JWT authentication flow

## Prerequisites

- Python 3.6 or higher
- Credentials (Client ID and private key) provided by Polymarket
- A registered trading account

## Installation

```bash
# Extract the download
unzip polymarket-client-sample-code.zip
cd client_sample_code/python

# Install dependencies
pip3 install -r requirements.txt
```

## Configuration

Copy the sample environment file and fill in your credentials:

```bash
cp sample_env.sh my_env.sh
nano my_env.sh  # Edit with your credentials
source my_env.sh
```

### Required Environment Variables

| Variable | Description |
|----------|-------------|
| `POLYMARKET_CLIENT_ID` | Your Client ID (provided by Polymarket) |
| `POLYMARKET_PRIVATE_KEY_PATH` | Path to your RSA private key (PEM format) |
| `POLYMARKET_API_URL` | API base URL (e.g., `https://api.preprod.polymarketexchange.com`) |
| `POLYMARKET_AUTH_DOMAIN` | Authentication domain (e.g., `pmx-preprod.us.auth0.com`) |
| `POLYMARKET_AUTH_AUDIENCE` | Authentication audience (matches API URL) |
| `POLYMARKET_PARTICIPANT_ID` | Your participant ID (e.g., `firms/Your-Firm/users/your-user`) |
| `POLYMARKET_ACCOUNT` | Your trading account (e.g., `firms/Your-Firm/accounts/your-account`) |

### Optional Environment Variables

| Variable | Default | Description |
|----------|---------|-------------|
| `POLYMARKET_TEST_SYMBOL` | `SBLIX-KC-YES` | Symbol for order placement demo |
| `POLYMARKET_VERBOSE` | `false` | Enable verbose logging |
| `POLYMARKET_TIMEOUT` | `30` | Request timeout (seconds) |

## REST API Examples

| Example | Description |
|---------|-------------|
| `01_health_check.py` | Health check (no authentication required) |
| `02_whoami.py` | Get current user info |
| `03_list_accounts.py` | List trading accounts |
| `04_get_balance.py` | Get account balance |
| `05_list_positions.py` | List positions |
| `06_list_instruments.py` | List tradeable instruments |
| `07_list_symbols.py` | List all symbols |
| `08_search_orders.py` | Search order history |
| `09_list_users.py` | List users in firm |
| `10_place_and_cancel_order.py` | Place and cancel order (safe demo) |

## Running Examples

### Run All Examples

```bash
cd examples
python3 run_all.py
```

### Run Individual Examples

```bash
python3 examples/01_health_check.py
python3 examples/02_whoami.py
python3 examples/10_place_and_cancel_order.py
```

## Code Examples

### Authentication Flow

The client uses **private_key_jwt** authentication:

```python
import jwt
from cryptography.hazmat.primitives import serialization

def create_client_assertion(client_id: str, domain: str, private_key_path: str) -> str:
    """Create a signed JWT for client authentication."""
    with open(private_key_path, 'rb') as f:
        private_key = serialization.load_pem_private_key(f.read(), password=None)

    now = int(time.time())
    claims = {
        "iss": client_id,
        "sub": client_id,
        "aud": f"https://{domain}/oauth/token",
        "iat": now,
        "exp": now + 300,  # 5 minutes
        "jti": str(uuid.uuid4()),
    }

    return jwt.encode(claims, private_key, algorithm="RS256")
```

### Using the API Client

```python
from config import load_config
from api_client import PolymarketClient

# Load configuration from environment
config = load_config()

# Create client
client = PolymarketClient(config)

# Make API calls
status, result = client.health()
print(f"Health: {result}")

status, result = client.whoami()
print(f"User: {result.get('user')}")

status, result = client.get_balance(config.account, "USD")
print(f"Balance: ${float(result.get('balance', 0)):,.2f}")
```

### Placing and Canceling Orders

```python
import uuid

# Generate unique client order ID
clord_id = f"sample-{uuid.uuid4()}"

# Place order at unattractive price (won't fill)
status, result = client.place_order(
    symbol="SBLIX-KC-YES",
    side="SIDE_BUY",
    order_type="ORDER_TYPE_LIMIT",
    quantity=1,
    price=1,  # $0.01 - very unattractive
    account=config.account,
    clord_id=clord_id,
)

order_id = result.get("orderId", "") or result.get("order_id", "")
print(f"Order placed: {order_id}")

# Cancel the order immediately
cancel_status, cancel_result = client.cancel_order(
    order_id=order_id,
    account=config.account,
    symbol="SBLIX-KC-YES"
)
print(f"Order cancelled: {cancel_status}")
```

## File Structure

```
client_sample_code/python/
├── README.md                # Python-specific setup
├── requirements.txt         # Dependencies (PyJWT, cryptography)
├── sample_env.sh            # Sample environment configuration
├── config.py                # Configuration loading and validation
├── auth.py                  # Authentication
├── api_client.py            # REST API client
└── examples/
    ├── 01_health_check.py   # Health check (no auth)
    ├── 02_whoami.py         # Get current user
    ├── 03_list_accounts.py  # List accounts
    ├── 04_get_balance.py    # Get balance
    ├── 05_list_positions.py # List positions
    ├── 06_list_instruments.py # List instruments
    ├── 07_list_symbols.py   # List symbols
    ├── 08_search_orders.py  # Search orders
    ├── 09_list_users.py     # List users
    ├── 10_place_and_cancel_order.py  # Place and cancel order
    └── run_all.py           # Run all examples
```

## Troubleshooting

### "Private key file not found"

Ensure `POLYMARKET_PRIVATE_KEY_PATH` points to a valid PEM file:

```bash
ls -la $POLYMARKET_PRIVATE_KEY_PATH
openssl rsa -in $POLYMARKET_PRIVATE_KEY_PATH -check -noout
```

### "Missing required environment variables"

Source your environment file before running:

```bash
source my_env.sh
python3 examples/run_all.py
```

### "Authentication server returned 401"

- Verify your Client ID is correct
- Ensure your private key matches the public key registered with Polymarket
- Check that your credentials haven't expired

## Support

For API documentation, see the [REST API Reference](/api-reference/introduction).

For issues with this sample code, contact **fix@qcex.com**.
